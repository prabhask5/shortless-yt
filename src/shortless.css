/**
 * shortless.css
 *
 * NUCLEAR Shorts removal stylesheet for the Shortless YouTube extension.
 * Hides ALL YouTube Shorts elements across desktop and mobile web.
 *
 * Injected at `document_start` via the extension manifest so that
 * Shorts content is hidden before the first paint — no flash of
 * unwanted content.
 *
 * Every rule uses `display: none !important` to override YouTube's
 * inline styles and specificity.
 *
 * Strategy: we use BOTH attribute-based selectors (fast, no DOM walk)
 * and :has()-based selectors (catches elements by their children).
 * The JS content script provides an additional fallback layer for
 * anything CSS can't catch.
 */

/* =========================================================================
 * 1. SHORTS SHELVES & CAROUSELS (Desktop)
 *    The primary containers YouTube uses to display Shorts collections.
 *    Targets every known variant across Home, Search, Subscriptions,
 *    Channel pages, Explore, and Trending.
 * ========================================================================= */

/** Main Shorts shelf — the primary horizontal carousel labeled "Shorts". */
ytd-reel-shelf-renderer,

/** Alternate Shorts shelf — a variant container YouTube A/B tests. */
ytd-rich-shelf-renderer[is-shorts],

/** Grid-based Shorts display — slim grid cards used in some layouts. */
ytd-rich-grid-slim-media,

/** Individual Shorts card inside a shelf carousel. */
ytd-reel-item-renderer,

/** Shorts player element — the inline video player used in shelves. */
ytd-reel-video-renderer,

/** Shorts shelf with is-shorts attribute variant. */
ytd-reel-shelf-renderer[is-shorts] {
  display: none !important;
}

/* =========================================================================
 * 2. INDIVIDUAL SHORTS IN FEEDS — by overlay badge (Desktop)
 *    YouTube marks Shorts thumbnails with a special overlay badge
 *    (`overlay-style="SHORTS"`). These selectors catch any Shorts
 *    that appear as standalone items anywhere in the UI.
 * ========================================================================= */

/** Shorts in grid layouts (channel "Videos" tab, topic pages). */
ytd-grid-video-renderer:has(ytd-thumbnail-overlay-time-status-renderer[overlay-style="SHORTS"]),

/** Shorts in rich item feeds (Home page main grid). */
ytd-rich-item-renderer:has(ytd-thumbnail-overlay-time-status-renderer[overlay-style="SHORTS"]),

/** Shorts in standard video lists (Search results, playlists). */
ytd-video-renderer:has(ytd-thumbnail-overlay-time-status-renderer[overlay-style="SHORTS"]),

/** Shorts in compact video lists (watch-next sidebar, end screens). */
ytd-compact-video-renderer:has(ytd-thumbnail-overlay-time-status-renderer[overlay-style="SHORTS"]) {
  display: none !important;
}

/* =========================================================================
 * 3. INDIVIDUAL SHORTS IN FEEDS — by /shorts/ href (Desktop)
 *    Fallback: catch video renderers whose PRIMARY link points to /shorts/.
 *    Uses direct child > selectors where possible to avoid matching
 *    a /shorts/ link buried deep in an unrelated recommendation.
 * ========================================================================= */

ytd-grid-video-renderer:has(> div > a[href*="/shorts/"]),
ytd-video-renderer:has(> .text-wrapper > a[href*="/shorts/"]),
ytd-compact-video-renderer:has(a[href*="/shorts/"]) {
  display: none !important;
}

/* =========================================================================
 * 4. SIDEBAR NAVIGATION (Desktop)
 *    Removes the "Shorts" link from both the expanded left sidebar
 *    (guide) and the collapsed mini sidebar.
 * ========================================================================= */

/** Expanded sidebar — the full-width guide entry for "Shorts". */
ytd-guide-entry-renderer:has(a[title="Shorts"]),
ytd-guide-entry-renderer:has(a[href="/shorts"]),

/** Collapsed sidebar — the mini icon entry for "Shorts". */
ytd-mini-guide-entry-renderer:has(a[title="Shorts"]),
ytd-mini-guide-entry-renderer:has(a[href="/shorts"]) {
  display: none !important;
}

/* =========================================================================
 * 5. CHANNEL PAGE SHORTS TAB (Desktop)
 *    Hides the "Shorts" tab on channel pages so users only see
 *    Videos, Live, Playlists, Community, etc.
 * ========================================================================= */

/** Modern tab shape element used in the redesigned channel layout. */
yt-tab-shape[tab-title="Shorts"],

/** Legacy paper tab element still used in some channel page variants. */
tp-yt-paper-tab:has(yt-formatted-string[title="Shorts"]),

/** Tab with href pointing to the channel's /shorts sub-page. */
yt-tab-shape:has(a[href*="/shorts"]),
tp-yt-paper-tab:has(a[href*="/shorts"]) {
  display: none !important;
}

/* =========================================================================
 * 6. SHORTS FILTER CHIPS & SEARCH TABS (Desktop)
 *    Search and explore pages show filter chips/tabs at the top of
 *    results. YouTube uses multiple element types for these.
 * ========================================================================= */

/** Filter chip labeled "Shorts" — by formatted-string title. */
yt-chip-cloud-chip-renderer:has(yt-formatted-string[title="Shorts"]),

/** Filter chip — by chip-title attribute. */
yt-chip-cloud-chip-renderer[chip-title="Shorts"],

/** Filter chip — by anchor title. */
yt-chip-cloud-chip-renderer:has(a[title="Shorts"]),

/** Search filter tab — the "Shorts" tab in search results. */
yt-tab-shape[tab-title="Shorts"],

/** Search filter renderer variants. */
ytd-search-filter-renderer:has(a[title="Shorts"]),
ytd-search-filter-renderer:has(yt-formatted-string[title="Shorts"]),

/** Search sub-menu "Type: Short" filter. */
ytd-search-filter-group-renderer a[title="Short (<4 minutes)"] {
  display: none !important;
}

/* =========================================================================
 * 7. NOTIFICATIONS (Desktop)
 *    Hides notification entries that link to a Shorts video.
 * ========================================================================= */

ytd-notification-renderer:has(a[href*="/shorts/"]) {
  display: none !important;
}

/* =========================================================================
 * 8. "SHORTS REMIXING THIS VIDEO" & RELATED (Desktop)
 *    On watch pages, YouTube shows shelves of Shorts that "remix"
 *    or are "related" to the current video.
 * ========================================================================= */

ytd-reel-shelf-renderer[is-shorts] {
  display: none !important;
}

/* =========================================================================
 * 9. DESKTOP SECTION-LEVEL CATCH-ALLS
 *    Only hide sections that contain Shorts-specific shelf renderers.
 *    Do NOT use href-based catch-alls on sections — a regular video
 *    section might contain a single /shorts/ link and we'd nuke it all.
 * ========================================================================= */

/** Item section wrapping a Shorts shelf. */
ytd-item-section-renderer:has(ytd-reel-shelf-renderer) {
  display: none !important;
}

/* =========================================================================
 * 10. MOBILE WEB (m.youtube.com)
 *     Mobile web uses its own `ytm-*` custom elements. We target every
 *     known variant aggressively — shelves, sections, headers, cards,
 *     navigation, and link-based catch-alls.
 * ========================================================================= */

/* ---- Mobile Shorts shelves ---- */

/** Mobile Shorts shelf carousel. */
ytm-reel-shelf-renderer,

/** Mobile Shorts shelf variant. */
ytm-shorts-shelf-renderer,

/* ---- Mobile bottom navigation ---- */

/** "Shorts" tab in the bottom navigation bar. */
ytm-pivot-bar-item-renderer:has(.pivot-shorts),
ytm-pivot-bar-item-renderer:has(a[href="/shorts"]),

/* ---- Mobile Shorts cards ---- */

/** Shorts lockup view model (v1). */
ytm-shorts-lockup-view-model,

/** Shorts lockup view model (v2 — newer variant). */
ytm-shorts-lockup-view-model-v2,

/* ---- Mobile rich items wrapping Shorts ---- */

ytm-rich-item-renderer:has(ytm-shorts-lockup-view-model),
ytm-rich-item-renderer:has(ytm-shorts-lockup-view-model-v2),

/* ---- Mobile video renderers with SHORTS style ---- */

ytm-video-with-context-renderer:has([data-style="SHORTS"]),

/* ---- Mobile Shorts sections (header + shelf container) ---- */
/* These are the parent sections that contain the "Shorts" subheader
 * (icon + title + three-dot "show fewer shorts" menu) and the shelf.
 * IMPORTANT: Only match sections by Shorts-specific child elements,
 * NOT by href catch-alls — a mixed section with one /shorts/ link
 * would incorrectly hide all its regular video content too. */

/** Rich section containing Shorts-specific lockup/shelf elements. */
ytm-rich-section-renderer:has(ytm-shorts-lockup-view-model),
ytm-rich-section-renderer:has(ytm-shorts-lockup-view-model-v2),
ytm-rich-section-renderer:has(ytm-reel-shelf-renderer),
ytm-rich-section-renderer:has(ytm-shorts-shelf-renderer),

/** Rich section matched by header text/class. */
ytm-rich-section-renderer:has(span[title="Shorts"]),
ytm-rich-section-renderer:has(.shortsLockupViewModelHostHeaderText),
ytm-rich-section-renderer:has(.reel-shelf-header),
ytm-rich-section-renderer:has(.shorts-shelf-header),

/** Item section containing Shorts-specific shelf renderers. */
ytm-item-section-renderer:has(ytm-reel-shelf-renderer),
ytm-item-section-renderer:has(ytm-shorts-lockup-view-model),
ytm-item-section-renderer:has(ytm-shorts-lockup-view-model-v2),
ytm-item-section-renderer:has(ytm-shorts-shelf-renderer),

/* ---- Mobile channel page Shorts tab ---- */

ytm-tab-renderer:has(a[href*="/shorts"]),

/* ---- Mobile notification items linking to /shorts/ ---- */

ytm-notification-renderer:has(a[href*="/shorts/"]) {
  display: none !important;
}

/* =========================================================================
 * 11. SHORTS PLAYER PAGE ELEMENTS
 *     If somehow the user ends up on a /shorts/ page (before the JS
 *     redirect kicks in), hide the Shorts-specific player UI so they
 *     see a blank page rather than Shorts content.
 * ========================================================================= */

/** Desktop Shorts player page. */
ytd-shorts,

/** Mobile Shorts player page. */
ytm-shorts-player,

/** Shorts engagement panel overlay. */
ytd-engagement-panel-section-list-renderer[target-id="engagement-panel-shorts-description"] {
  display: none !important;
}
